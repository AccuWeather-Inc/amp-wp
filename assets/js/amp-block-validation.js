!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=60)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wp.data},function(e,t,r){e.exports=r(35)()},function(e,t){e.exports=ampBlockValidation},function(e,t){e.exports=window.wp.blockEditor},,function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wp.compose},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},,function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},,function(e,t,r){var n=r(37),o=r(38),i=r(32),c=r(39);e.exports=function(e,t){return n(e)||o(e,t)||i(e,t)||c()}},,function(e,t){e.exports=window.React},,function(e,t){e.exports=window.wp.hooks},,,function(e,t){e.exports=window.wp.editPost},,,,,,,,function(e,t){e.exports=window.wp.plugins},function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var c=o.apply(null,n);c&&e.push(c)}else if("object"===i)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},function(e,t,r){var n=r(57),o=r(58),i=r(32),c=r(59);e.exports=function(e){return n(e)||o(e)||i(e)||c()}},function(e,t,r){var n=r(33);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}},,function(e,t,r){"use strict";var n=r(36);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,c){if(c!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var c,a=e[Symbol.iterator]();!(n=(c=a.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw i}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=window.wp.url},,,,function(e,t){e.exports=window.wp.apiFetch},,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){var n=r(33);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";r.r(t),r.d(t,"PLUGIN_NAME",(function(){return je})),r.d(t,"SIDEBAR_NAME",(function(){return _e})),r.d(t,"PLUGIN_TITLE",(function(){return we}));var n=r(0),o=r(29),i=r(1),c=r(18),a=r(21),l=r(3),s=r(12),u=r.n(s),d=r(5);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){u()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f="amp/block-validation",p="SET_FETCHING_ERRORS_REQUEST_ERROR_MESSAGE",E="SET_IS_FETCHING_ERRORS",v="SET_IS_POST_DIRTY",O="SET_IS_SHOWING_REVIEWED",h="SET_REVIEW_LINK",g="SET_VALIDATION_ERRORS";r(16),r(4);var j=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{fill:"#0075C2",d:"m13.3 9.1-4 6.6h-.8l.7-4.3H7c-.2 0-.4-.2-.4-.4 0-.1.1-.2.1-.2l4-6.6h.7l-.7 4.3h2.2c.2 0 .4.2.4.4.1.1 0 .2 0 .2zM10 .5C4.7.5.4 4.8.4 10c0 5.3 4.3 9.5 9.6 9.5s9.6-4.3 9.6-9.5c0-5.3-4.3-9.5-9.6-9.5z"}))};j.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};var _=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"M9.863 16.815h-.7l.8-4.5h-2.3c-.2 0-.4-.2-.4-.4 0-.1.1-.2.1-.2l4.2-7h.8l-.8 4.6h2.3c.2 0 .4.2.4.4 0 .1 0 .2-.1.2l-4.3 6.9zm.8-16.1c-5.5 0-10 4.5-10 10s4.5 10 10 10 10-4.5 10-10-4.5-10-10-10z"}))};_.defaultProps={width:"21",height:"21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var w=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.913 10.283c0 5.5 4.5 10 10 10s10-4.5 10-10-4.5-10-10-10-10 4.5-10 10z",fill:"#fff"}),Object(n.createElement)("path",{d:"M10.113 16.383h-.7l.8-4.5h-2.3c-.2 0-.4-.2-.4-.4 0-.1.1-.2.1-.2l4.2-7h.8l-.8 4.6h2.3c.2 0 .4.2.4.4 0 .1 0 .2-.1.2l-4.3 6.9zm.8-16.1c-5.5 0-10 4.5-10 10s4.5 10 10 10 10-4.5 10-10-4.5-10-10-10z",fill:"#37414B"}),Object(n.createElement)("circle",{cx:"10.913",cy:"10.283",r:"9",stroke:"#BB522E",strokeWidth:"2"}),Object(n.createElement)("path",{stroke:"#BB522E",strokeWidth:"2",d:"M16.518 17.346 3.791 4.618"}),Object(n.createElement)("path",{stroke:"#fff",strokeWidth:"2",d:"M19.805 18.118 3.282 1.249"}))};function y(e){var t=e.hasBadge;return Object(n.createElement)("span",{className:"amp-toolbar-icon components-menu-items__item-icon".concat(t?" amp-toolbar-icon--has-badge":"")},Object(n.createElement)(_,null))}function k(e){var t=e.hasBadge;return Object(n.createElement)("span",{className:"amp-toolbar-broken-icon".concat(t?" amp-toolbar-broken-icon--has-badge":"")},Object(n.createElement)(w,null))}function S(e){var t=e.broken,r=void 0!==t&&t,o=e.count;return Object(n.createElement)("div",{className:"amp-plugin-icon ".concat(r?"amp-plugin-icon--broken":"")},r?Object(n.createElement)(k,{hasBadge:Boolean(o)}):Object(n.createElement)(y,{hasBadge:Boolean(o)}),0<o&&Object(n.createElement)("div",{className:"amp-error-count-badge"},o))}function R(){return Object(n.createElement)(y,{hasBadge:!1})}function P(e){var t=e.broken,r=void 0!==t&&t;return Object(n.createElement)("div",{className:"amp-status-icon ".concat(r?"amp-status-icon--broken":"")},Object(n.createElement)(j,null))}w.defaultProps={width:"21",height:"21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var T=r(10),A=r.n(T),I=r(9),C=r(6),N=r(2);function x(e){var t=e.clientId,r=e.count,o=Object(l.useDispatch)("core/edit-post").openGeneralSidebar;return Object(n.createElement)(C.BlockControls,null,Object(n.createElement)(N.ToolbarButton,{onClick:function(){o("".concat(je,"/").concat(_e)),setTimeout((function(){var e=Array.from(document.querySelectorAll(".error-".concat(t," button"))),r=e[0];e.reverse();for(var n=0,o=e;n<o.length;n++){var i=o[n];"false"===i.getAttribute("aria-expanded")&&i.click()}r&&r.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}))}},Object(n.createElement)(S,{count:r})))}function V(e){var t=e.BlockEdit,r=e.clientId,o=Object(l.useSelect)((function(e){return(e(f).getUnreviewedValidationErrors()||[]).filter((function(e){var t=e.clientId;return r===t})).length||0}),[r]);return Object(n.createElement)(n.Fragment,null,0<o&&Object(n.createElement)(x,{clientId:r,count:o}),Object(n.createElement)(t,e))}var D=Object(I.createHigherOrderComponent)((function(e){return function(t){return Object(n.createElement)(V,A()({},t,{BlockEdit:e}))}}),"BlockEditWithAMPToolbar"),M=(r(53),r(30)),L=r.n(M);r(54),r(55);function B(){return Object(n.createElement)("div",{className:"amp-spinner-container"},Object(n.createElement)(N.Spinner,null))}function U(e){var t=e.action,r=e.icon,o=e.isLoading,i=void 0!==o&&o,c=e.message,a=i?Object(n.createElement)(B,null):r;return Object(n.createElement)("div",{className:L()("sidebar-notification",{"is-loading":i})},a&&Object(n.createElement)("div",{className:"sidebar-notification__icon"},a),Object(n.createElement)("div",{className:"sidebar-notification__content"},Object(n.createElement)("p",null,c),t&&Object(n.createElement)("p",null,t)))}function z(e){var t=e.children,r=e.isShady;return Object(n.createElement)("div",{className:L()("sidebar-notifications-container",{"is-shady":r})},t)}var F=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("g",{clipPath:"url(#clip-amp-validation-errors-kept)",fill:"#BB522E"},Object(n.createElement)("path",{d:"M10.762 2.541c4.4 0 8 3.6 8 8 0 1.6-.5 3-1.2 4.2l1.4 1.5c1.1-1.6 1.8-3.6 1.8-5.7 0-5.5-4.5-10-10-10-2 0-3.9.6-5.5 1.7l1.4 1.5c1.2-.8 2.6-1.2 4.1-1.2zM.762 10.541c0 5.5 4.5 10 10 10 2.7 0 5.1-1.1 6.9-2.8l-14-14.2c-1.8 1.8-2.9 4.3-2.9 7zm10 8c-4.4 0-8-3.6-8-8 0-1.5.4-2.8 1.1-4l10.9 10.9c-1.2.7-2.5 1.1-4 1.1z"}),Object(n.createElement)("path",{d:"M14.262 9.74c.1 0 .1-.1.1-.2 0-.2-.2-.4-.4-.4h-2l1.6 1.6.7-1zM12.461 4.541h-.8l-1.6 2.6 1.7 1.7.7-4.3zM7.462 11.541s-.1.1-.1.2c0 .2.2.4.4.4h2.3l-.8 4.5h.7l2.6-4.1-3.5-3.6-1.6 2.6z"})),Object(n.createElement)("defs",null,Object(n.createElement)("clipPath",{id:"clip-amp-validation-errors-kept"},Object(n.createElement)("path",{fill:"#fff",transform:"translate(.762 .541)",d:"M0 0h20v20H0z"}))))};function H(){var e=Object(l.useDispatch)("core/editor"),t=e.autosave,r=e.savePost,o=Object(l.useSelect)((function(e){return{fetchingErrorsRequestErrorMessage:e(f).getFetchingErrorsRequestErrorMessage(),isDraft:-1!==["draft","auto-draft"].indexOf(e("core/editor").getEditedPostAttribute("status")),isEditedPostNew:e("core/editor").isEditedPostNew(),isFetchingErrors:e(f).getIsFetchingErrors(),keptMarkupValidationErrorCount:e(f).getKeptMarkupValidationErrors().length,reviewLink:e(f).getReviewLink(),unreviewedValidationErrorCount:e(f).getUnreviewedValidationErrors().length,validationErrorCount:e(f).getValidationErrors().length}}),[]),c=o.fetchingErrorsRequestErrorMessage,a=o.isDraft,s=o.isEditedPostNew,u=o.isFetchingErrors,d=o.keptMarkupValidationErrorCount,m=o.reviewLink,b=o.unreviewedValidationErrorCount,p=o.validationErrorCount;return u?null:s?Object(n.createElement)(U,{icon:Object(n.createElement)(P,null),message:Object(i.__)("Validation will be checked upon saving.","amp")}):c?Object(n.createElement)(U,{icon:Object(n.createElement)(F,null),message:c,action:Object(n.createElement)(N.Button,{isLink:!0,onClick:a?function(){return r({isPreview:!0})}:function(){return t({isPreview:!0})}},Object(i.__)("Try again","amp"))}):d>0?Object(n.createElement)(U,{icon:Object(n.createElement)(F,null),message:Object(i.sprintf)(
/* translators: %d is count of validation errors whose invalid markup is kept */
Object(i._n)("AMP is disabled due to invalid markup being kept for %d issue.","AMP is disabled due to invalid markup being kept for %d issues.",d,"amp"),d),action:m&&Object(n.createElement)(N.ExternalLink,{href:m},Object(i.__)("View technical details","amp"))}):b>0?Object(n.createElement)(U,{icon:Object(n.createElement)(P,{broken:!0}),message:Object(i.sprintf)(
/* translators: %d is count of unreviewed validation error */
Object(i._n)("AMP is enabled, but %d issue needs review.","AMP is enabled, but %d issues need review.",b,"amp"),b),action:m&&Object(n.createElement)(N.ExternalLink,{href:m},Object(i.__)("View technical details","amp"))}):p>0?Object(n.createElement)(U,{icon:Object(n.createElement)(P,null),message:Object(i.sprintf)(
/* translators: %d is count of unreviewed validation error */
Object(i._n)("AMP is enabled, and %d validation issue has been reviewed.","AMP is enabled, and %d validation issues have been reviewed.",p,"amp"),p),action:m&&Object(n.createElement)(N.ExternalLink,{href:m},Object(i.__)("View technical details","amp"))}):Object(n.createElement)(U,{icon:Object(n.createElement)(P,null),message:Object(i.__)("AMP is enabled. There are no validation issues.","amp")})}F.defaultProps={width:"21",height:"21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var W=r(14),q=r.n(W),K=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{fill:"#707070",d:"M8 20c1.1 0 2-.9 2-2H6c0 1.1.9 2 2 2zm6-6V9c0-3.07-1.63-5.64-4.5-6.32V2C9.5 1.17 8.83.5 8 .5S6.5 1.17 6.5 2v.68C3.64 3.36 2 5.92 2 9v5l-2 2v1h16v-1l-2-2zm-2 1H4V9c0-2.48 1.51-4.5 4-4.5s4 2.02 4 4.5v6z"}))};function J(){var e=Object(n.useState)(!1),t=q()(e,2),r=t[0],o=t[1],c=Object(n.useState)(""),a=q()(c,2),s=a[0],u=a[1],d=Object(l.useDispatch)("core/editor"),m=d.autosave,b=d.savePost,p=Object(l.useSelect)((function(e){return{hasErrorsFromRemovedBlocks:Boolean(e(f).getValidationErrors().find((function(t){var r=t.clientId;return r&&!e("core/block-editor").getBlockName(r)}))),hasActiveMetaboxes:e("core/edit-post").hasMetaBoxes(),isDraft:-1!==["draft","auto-draft"].indexOf(e("core/editor").getEditedPostAttribute("status")),isEditedPostNew:e("core/editor").isEditedPostNew(),isFetchingErrors:e(f).getIsFetchingErrors(),isPostDirty:e(f).getIsPostDirty()}}),[]),E=p.hasErrorsFromRemovedBlocks,v=p.hasActiveMetaboxes,O=p.isDraft,h=p.isFetchingErrors,g=p.isEditedPostNew,j=p.isPostDirty,_=Object(I.usePrevious)(g),w=Object(I.usePrevious)(h);return Object(n.useEffect)((function(){r||!h&&w&&o(!0)}),[r,h,w]),Object(n.useEffect)((function(){u(r?Object(i.__)("Re-validating page content.","amp"):g||_?Object(i.__)("Validating page content.","amp"):Object(i.__)("Loading…","amp"))}),[r,g,_]),h?Object(n.createElement)(U,{message:s,isLoading:!0}):j||v||E?Object(n.createElement)(U,{icon:Object(n.createElement)(K,null),message:v||!j?Object(i.__)("Page content may have changed.","amp"):Object(i.__)("Page content has changed.","amp"),action:O?Object(n.createElement)(N.Button,{isLink:!0,onClick:function(){return b({isPreview:!0})}},Object(i.__)("Save draft and validate","amp")):Object(n.createElement)(N.Button,{isLink:!0,onClick:function(){return m({isPreview:!0})}},Object(i.__)("Re-validate","amp"))}):null}K.defaultProps={fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 20"};r(56);var G=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"m2.45 3.068 3.34 1.178v1.64L.743 3.749V2.365L5.79.227v1.64L2.45 3.068zm8.19-.017L7.237 1.86V.232l5.104 2.14v1.376L7.236 5.893V4.258l3.405-1.207z",fill:"#fff"}))};G.defaultProps={width:"13",height:"6",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var Y=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"M3.675.959h1.5v4.9c0 .5-.1.9-.3 1.2-.2.3-.5.6-.8.8-.4.2-.8.3-1.2.3-.8 0-1.3-.2-1.8-.6-.4-.4-.6-.9-.6-1.6h1.5c0 .3.1.6.2.8.1.2.4.2.7.2.3 0 .5-.1.7-.3.2-.2.2-.5.2-.8v-4.9h-.1zM10.075 6.26c0-.3-.1-.5-.3-.6-.2-.1-.5-.3-1.1-.5-.5-.2-.9-.3-1.2-.5-.8-.4-1.2-1-1.2-1.8 0-.4.1-.7.3-1 .2-.3.5-.5.9-.7.5-.2 1-.3 1.5-.3s1 .1 1.4.3c.4.2.7.4.9.8.2.3.3.7.3 1.1h-1.5c0-.3-.1-.6-.3-.8-.2-.2-.5-.3-.9-.3s-.6.1-.8.2c-.2.2-.3.3-.3.6 0 .2.1.4.3.6.2.2.6.3 1 .4.8.3 1.4.6 1.8.9.4.3.6.8.6 1.4 0 .6-.2 1.1-.7 1.4-.5.4-1.1.5-1.9.5-.5 0-1-.1-1.5-.3-.4-.2-.8-.5-1-.8-.2-.3-.4-.8-.4-1.2h1.5c0 .8.5 1.2 1.4 1.2.3 0 .6-.1.8-.2.3 0 .4-.2.4-.4z",fill:"#fff"}))};Y.defaultProps={width:"12",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var $=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"M4.13 6.46h-1.2l-.4 2.4h-1.1l.4-2.4H.53v-1h1.5l.3-1.7h-1.3v-1h1.5l.4-2.4h1.1l-.4 2.4h1.1l.4-2.4h1.1l-.4 2.4h1.3v1h-1.5l-.3 1.7h1.3v1h-1.5l-.4 2.4h-1.1l.5-2.4zm-1-1h1.1l.3-1.7h-1.1l-.3 1.7z",fill:"#fff"}))};function Q(e){switch(e.type){case d.HTML_ATTRIBUTE_ERROR_TYPE:case d.HTML_ELEMENT_ERROR_TYPE:return Object(n.createElement)(G,null);case d.JS_ERROR_TYPE:return Object(n.createElement)(Y,null);case d.CSS_ERROR_TYPE:return Object(n.createElement)($,null);default:return null}}function X(e){var t=e.kept,r=e.title,o=e.error.type;return Object(n.createElement)("div",{className:"amp-error__panel-title",title:t?Object(i.__)("This error has been kept, making this URL not AMP-compatible.","amp"):""},Object(n.createElement)("div",{className:"amp-error__icons"},o&&Object(n.createElement)("div",{className:"amp-error__error-type-icon amp-error__error-type-icon--".concat(null==o?void 0:o.replace(/_/g,"-"))},Object(n.createElement)(Q,{type:o}))),Object(n.createElement)("div",{className:"amp-error__title",dangerouslySetInnerHTML:{__html:r}}))}$.defaultProps={width:"8",height:"9",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var Z=r(31),ee=r.n(Z);function te(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return re(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){a=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(a)throw i}}}}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r={theme:[],plugin:[],"mu-plugin":[],embed:[],core:[],blocks:[]},n=te(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;o.type&&o.type in r?r[o.type].push(o):"block_name"in o&&r.blocks.push(o)}}catch(e){n.e(e)}finally{n.f()}var c=[],a=ee()(new Set(r.plugin.map((function(e){return e.name})))),l=ee()(new Set(r["mu-plugin"].map((function(e){return e.name})))),s=[].concat(ee()(a),ee()(l));if(1===s.length)c.push(d.pluginNames[s[0]]||s[0]);else{var u=a.length,m=l.length;0<u&&c.push(Object(i.sprintf)("%1$s (%2$d)",Object(i.__)("Plugins","amp"),u)),0<m&&c.push(Object(i.sprintf)("%1$s (%2$d)",Object(i.__)("Must-use plugins","amp"),m))}if(0===r.embed.length){var b=r.theme.filter((function(e){var t=e.name;return d.themeSlug===t})),f=r.theme.filter((function(e){var t=e.name;return d.themeSlug!==t}));0<b.length&&c.push(d.themeName),0<f.length&&
/* translators: placeholder is the slug of an inactive WordPress theme. */
c.push(Object(i.__)("Inactive theme(s)","amp"))}return 0===c.length&&0<r.blocks.length&&c.push(r.blocks[0].block_name),0===c.length&&0<r.embed.length&&c.push(Object(i.__)("Embed","amp")),0===c.length&&0<r.core.length&&c.push(Object(i.__)("Core","amp")),c.join(", ")}var oe=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"m10.075 4.055 6.275 10.842H3.8l6.275-10.842zm0-3.325L.908 16.564h18.333L10.075.73zm.833 11.667H9.242v1.667h1.666v-1.667zm0-5H9.242v3.333h1.666V7.397z",fill:"#BE2C23"}))};oe.defaultProps={width:"20",height:"17",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var ie=function(e){return Object(n.createElement)("svg",e,Object(n.createElement)("path",{d:"M12.258 9.043 10.49 10.81 8.716 9.043l-1.175 1.175 1.775 1.767-1.767 1.767 1.175 1.175 1.767-1.767 1.767 1.767 1.175-1.175-1.767-1.767 1.767-1.767-1.175-1.175zm1.15-5.391-.834-.834H8.408l-.834.834H4.658v1.666h11.666V3.652h-2.916zm-7.917 12.5c0 .916.75 1.666 1.667 1.666h6.666c.917 0 1.667-.75 1.667-1.666v-10h-10v10zm1.667-8.334h6.666v8.334H7.158V7.818z",fill:"#479696"}))};function ce(e){var t,r=e.clientId,o=e.blockTypeName,c=e.sources,a=null===d.blockSources||void 0===d.blockSources?void 0:d.blockSources[o];if(r)switch(null==a?void 0:a.source){case"plugin":t=Object(i.sprintf)(
/* translators: %s: plugin name. */
Object(i.__)("%s (plugin)","amp"),a.title);break;case"mu-plugin":t=Object(i.sprintf)(
/* translators: %s: plugin name. */
Object(i.__)("%s (must-use plugin)","amp"),a.title);break;case"theme":t=Object(i.sprintf)(
/* translators: %s: theme name. */
Object(i.__)("%s (theme)","amp"),a.title);break;default:t=(null==a?void 0:a.title)||ne(c)}else t=ne(c);return t||(t=Object(i.__)("Unknown","amp")),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("dt",null,Object(i.__)("Source","amp")),Object(n.createElement)("dd",null,t))}function ae(e){var t,r,o=e.status;return t=[d.VALIDATION_ERROR_NEW_ACCEPTED_STATUS,d.VALIDATION_ERROR_ACK_ACCEPTED_STATUS].includes(o)?Object(n.createElement)("span",{className:"amp-error__kept-removed amp-error__kept-removed--removed"},Object(i.__)("Removed","amp"),Object(n.createElement)("span",null,Object(n.createElement)(ie,null))):Object(n.createElement)("span",{className:"amp-error__kept-removed amp-error__kept-removed--kept"},Object(i.__)("Kept","amp"),Object(n.createElement)("span",null,Object(n.createElement)(oe,null))),r=[d.VALIDATION_ERROR_ACK_ACCEPTED_STATUS,d.VALIDATION_ERROR_ACK_REJECTED_STATUS].includes(o)?Object(i.__)("Yes","amp"):Object(i.__)("No","amp"),Object(n.createElement)(n.Fragment,null,Object(n.createElement)("dt",null,Object(i.__)("Markup status","amp")),Object(n.createElement)("dd",null,t),Object(n.createElement)("dt",null,Object(i.__)("Reviewed","amp")),Object(n.createElement)("dd",null,r))}function le(e){var t=e.blockTypeIcon,r=e.blockTypeTitle;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)("dt",null,Object(i.__)("Block type","amp")),Object(n.createElement)("dd",null,Object(n.createElement)("span",{className:"amp-error__block-type-description"},r||Object(i.__)("unknown","amp"),t&&Object(n.createElement)("span",{className:"amp-error__block-type-icon"},Object(n.createElement)(C.BlockIcon,{icon:t})))))}function se(e){var t=e.blockType,r=e.clientId,o=e.error.sources,c=e.external,a=e.removed,l=e.status,s=null==t?void 0:t.title,u=null==t?void 0:t.name,d=null==t?void 0:t.icon;return Object(n.createElement)(n.Fragment,null,a&&Object(n.createElement)("p",null,Object(i.__)("This error is no longer detected, either because the block was removed or the editor mode was switched.","amp")),c&&Object(n.createElement)("p",null,Object(i.__)("This error comes from outside the content (e.g. header or footer).","amp")),Object(n.createElement)("dl",{className:"amp-error__details"},!(a||c)&&Object(n.createElement)(le,{blockTypeIcon:d,blockTypeTitle:s}),Object(n.createElement)(ce,{blockTypeName:u,clientId:r,sources:o}),Object(n.createElement)(ae,{status:l})))}function ue(e){var t=e.clientId,r=e.error,o=e.status,c=e.term_id,a=e.title,s=Object(l.useDispatch)("core/block-editor").selectBlock,m=Object(l.useSelect)((function(e){return e(f).getReviewLink()}),[]),b=o===d.VALIDATION_ERROR_ACK_ACCEPTED_STATUS||o===d.VALIDATION_ERROR_ACK_REJECTED_STATUS,p=o===d.VALIDATION_ERROR_ACK_REJECTED_STATUS||o===d.VALIDATION_ERROR_NEW_REJECTED_STATUS,E=!Boolean(t),v=Object(l.useSelect)((function(e){var r=e("core/block-editor").getBlockName(t);return{removed:t&&!r,blockType:e("core/blocks").getBlockType(r)}}),[t]),O=v.blockType,h=v.removed,g=null;m&&((g=new URL(m)).hash="#tag-".concat(c));var j=L()("amp-error",u()({"amp-error--reviewed":b,"amp-error--new":!b,"amp-error--removed":h,"amp-error--kept":p},"error-".concat(t),t));return Object(n.createElement)(N.PanelBody,{className:j,title:Object(n.createElement)(X,{error:r,kept:p,title:a}),initialOpen:!1},Object(n.createElement)(se,{blockType:O,clientId:t,error:r,external:E,removed:h,status:o}),Object(n.createElement)("div",{className:"amp-error__actions"},!(h||E)&&Object(n.createElement)(N.Button,{className:"amp-error__select-block",isSecondary:!0,onClick:function(){s(t)}},Object(i.__)("Select block","amp")),g&&Object(n.createElement)(N.ExternalLink,{href:g.href,className:"amp-error__details-link"},Object(i.__)("View details","amp"))))}function de(){var e=Object(l.useDispatch)(f).setIsShowingReviewed,t=Object(l.useSelect)((function(e){var t,r=e(f).getIsShowingReviewed();return{displayedErrors:r?e(f).getValidationErrors():e(f).getUnreviewedValidationErrors(),hasReviewedValidationErrors:(null===(t=e(f).getReviewedValidationErrors())||void 0===t?void 0:t.length)>0,isShowingReviewed:r}}),[]),r=t.displayedErrors,o=t.hasReviewedValidationErrors,c=t.isShowingReviewed;return Object(n.useEffect)((function(){var e=document.querySelector(".amp-sidebar a, .amp-sidebar button, .amp-sidebar input");e&&e.focus()}),[]),Object(n.createElement)("div",{className:"amp-sidebar"},Object(n.createElement)(z,{isShady:!0},Object(n.createElement)(J,null),Object(n.createElement)(H,null)),0<r.length&&Object(n.createElement)("ul",{className:"amp-sidebar__errors-list"},r.map((function(e,t){return Object(n.createElement)("li",{key:"".concat(e.clientId).concat(t),className:"amp-sidebar__errors-list-item"},Object(n.createElement)(ue,e))}))),o&&Object(n.createElement)("div",{className:"amp-sidebar__options"},Object(n.createElement)(N.Button,{isLink:!0,onClick:function(){return e(!c)}},c?Object(i.__)("Hide reviewed issues","amp"):Object(i.__)("Show reviewed issues","amp"))))}function me(){var e=Object(l.useSelect)((function(e){return e(f).getUnreviewedValidationErrors()}),[]),t=Object(n.useMemo)((function(){return e.map((function(e){return e.clientId})).filter((function(e){return e})).map((function(e){return"#block-".concat(e,"::before")}))}),[e]);return Object(n.createElement)("style",null,"".concat(t.join(",")," {\n\t\t\t\t\tborder-radius: 9px;\n\t\t\t\t\tbottom: -3px;\n\t\t\t\t\tbox-shadow: 0 0 0 2px #bb522e;\n\t\t\t\t\tcontent: '';\n\t\t\t\t\tleft: -3px;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tright: -3px;\n\t\t\t\t\ttop: -3px;\n\t\t\t\t}"))}ie.defaultProps={width:"21",height:"21",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var be=r(8),fe=r(44),pe=r.n(fe),Ee=r(40);function ve(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){a=!0,i=e},f:function(){try{c||null==r.return||r.return()}finally{if(a)throw i}}}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function he(e){var t=e.validationError,r=e.source,n=e.currentPostId,o=e.blockOrder,i=e.getBlock;if(r.block_name&&void 0!==r.block_content_index&&n===r.post_id){var c=o[r.block_content_index];if(c){var a=i(c);a&&a.name===r.block_name&&(t.clientId=c)}}}var ge,je="amp-block-validation",_e="amp-editor-sidebar",we=Object(i.__)("AMP Validation","amp");ge={ampCompatibilityBroken:!1,fetchingErrorsRequestErrorMessage:"",isPostDirty:!1,isFetchingErrors:!1,isShowingReviewed:!1,keptMarkupValidationErrors:[],rawValidationErrors:[],reviewLink:null,reviewedValidationErrors:[],unreviewedValidationErrors:[],validationErrors:[]},Object(l.registerStore)(f,function(e){return{reducer:function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case p:return b(b({},r),{},{fetchingErrorsRequestErrorMessage:n.fetchingErrorsRequestErrorMessage});case E:return b(b({},r),{},{isFetchingErrors:n.isFetchingErrors});case v:return b(b({},r),{},{isPostDirty:n.isPostDirty});case O:return b(b({},r),{},{isShowingReviewed:n.isShowingReviewed});case h:return b(b({},r),{},{reviewLink:n.reviewLink});case g:return b(b({},r),{},{ampCompatibilityBroken:Boolean(null===(t=n.validationErrors.filter((function(e){var t=e.status;return t===d.VALIDATION_ERROR_NEW_REJECTED_STATUS||t===d.VALIDATION_ERROR_ACK_REJECTED_STATUS})))||void 0===t?void 0:t.length),reviewedValidationErrors:n.validationErrors.filter((function(e){var t=e.status;return t===d.VALIDATION_ERROR_ACK_ACCEPTED_STATUS||t===d.VALIDATION_ERROR_ACK_REJECTED_STATUS})),unreviewedValidationErrors:n.validationErrors.filter((function(e){var t=e.status;return t===d.VALIDATION_ERROR_NEW_ACCEPTED_STATUS||t===d.VALIDATION_ERROR_NEW_REJECTED_STATUS})),keptMarkupValidationErrors:n.validationErrors.filter((function(e){var t=e.status;return t===d.VALIDATION_ERROR_NEW_REJECTED_STATUS||t===d.VALIDATION_ERROR_ACK_REJECTED_STATUS})),validationErrors:n.validationErrors});default:return r}},actions:{setFetchingErrorsRequestErrorMessage:function(e){return{type:p,fetchingErrorsRequestErrorMessage:e}},setIsFetchingErrors:function(e){return{type:E,isFetchingErrors:e}},setIsPostDirty:function(e){return{type:v,isPostDirty:e}},setIsShowingReviewed:function(e){return{type:O,isShowingReviewed:e}},setReviewLink:function(e){return{type:h,reviewLink:e}},setValidationErrors:function(e){return{type:g,validationErrors:e}}},selectors:{getAMPCompatibilityBroken:function(e){return e.ampCompatibilityBroken},getFetchingErrorsRequestErrorMessage:function(e){return e.fetchingErrorsRequestErrorMessage},getIsFetchingErrors:function(e){return e.isFetchingErrors},getIsPostDirty:function(e){return e.isPostDirty},getIsShowingReviewed:function(e){return e.isShowingReviewed},getReviewLink:function(e){return e.reviewLink},getReviewedValidationErrors:function(e){return e.reviewedValidationErrors},getUnreviewedValidationErrors:function(e){return e.unreviewedValidationErrors},getKeptMarkupValidationErrors:function(e){return e.keptMarkupValidationErrors},getValidationErrors:function(e){return e.validationErrors}},initialState:e}}(ge)),Object(o.registerPlugin)(je,{icon:R,render:function(){var e=Object(l.useSelect)((function(e){var t;return{broken:e(f).getAMPCompatibilityBroken(),errorCount:(null===(t=e(f).getUnreviewedValidationErrors())||void 0===t?void 0:t.length)||0}}),[]),t=e.broken,r=e.errorCount;return function(){var e=Object(n.useState)([]),t=q()(e,2),r=t[0],o=t[1],c=Object(n.useState)(!1),a=q()(c,2),s=a[0],u=a[1],d=Object(n.useState)([]),m=q()(d,2),b=m[0],p=m[1],E=Object(n.useState)(!1),v=q()(E,2),O=v[0],h=v[1],g=Object(l.useDispatch)(f),j=g.setIsFetchingErrors,_=g.setFetchingErrorsRequestErrorMessage,w=g.setReviewLink,y=g.setValidationErrors,k=Object(l.useSelect)((function(e){return{currentPostId:e("core/editor").getCurrentPostId(),getBlock:e("core/block-editor").getBlock,getClientIdsWithDescendants:e("core/block-editor").getClientIdsWithDescendants,isAutosavingPost:e("core/editor").isAutosavingPost(),isEditedPostNew:e("core/editor").isEditedPostNew(),isPreviewingPost:e("core/editor").isPreviewingPost(),isSavingPost:e("core/editor").isSavingPost(),previewLink:e("core/editor").getEditedPostPreviewLink(),validationErrors:e(f).getValidationErrors()}}),[]),S=k.currentPostId,R=k.getBlock,P=k.getClientIdsWithDescendants,T=k.isAutosavingPost,A=k.isEditedPostNew,C=k.isPreviewingPost,N=k.isSavingPost,x=k.previewLink,V=k.validationErrors,D=Object(I.usePrevious)(A);Object(n.useEffect)((function(){A||D||h(!0)}),[A,D]),Object(n.useEffect)((function(){if(N)return C?(h(!0),void u(!0)):void(T||h(!0))}),[T,C,N]),Object(n.useEffect)((function(){if(O)if(N)j(!0);else if(!s||Object(Ee.isURL)(x)){var e={id:S};s&&(e.preview_nonce=Object(Ee.getQueryArg)(x,"preview_nonce")),j(!0),h(!1),u(!1),_(""),o(P()),pe()({path:"/amp/v1/validate-post-url/",method:"POST",data:e}).then((function(e){y(e.results),w(e.review_link)})).catch((function(e){_((null==e?void 0:e.message)||Object(i.__)("Whoops! Something went wrong.","amp"))})).finally((function(){j(!1)}))}}),[S,P,s,N,x,_,j,w,y,O]),Object(n.useEffect)((function(){V&&!Object(be.isEqual)(b,V)&&p(V)}),[b,V]),Object(n.useEffect)((function(){var e=b.map((function(e){if(!e.error.sources)return e;var t,n=ve(e.error.sources);try{for(n.s();!(t=n.n()).done;){var o=t.value;if("clientId"in e)break;he({validationError:e,source:o,getBlock:R,blockOrder:0<r.length?r:P(),currentPostId:S})}}catch(e){n.e(e)}finally{n.f()}return e}));y(e)}),[r,S,R,P,y,b])}(),function(){var e=Object(n.useState)(null),t=q()(e,2),r=t[0],o=t[1],i=Object(n.useState)(),c=q()(i,2),a=c[0],s=c[1],u=Object(n.useRef)(null),d=Object(l.useDispatch)(f).setIsPostDirty,m=Object(l.useSelect)((function(e){return{getEditedPostContent:e("core/editor").getEditedPostContent,isPostDirty:e(f).getIsPostDirty(),isSavingOrPreviewingPost:e("core/editor").isSavingPost()&&!e("core/editor").isAutosavingPost()||e("core/editor").isPreviewingPost()}}),[]),b=m.getEditedPostContent,p=m.isPostDirty,E=m.isSavingOrPreviewingPost;Object(n.useEffect)((function(){return function(){u.current&&u.current()}}),[]),Object(n.useEffect)((function(){p&&E&&(d(!1),o(null))}),[p,E,d]),Object(n.useEffect)((function(){if(null===r){var e=b();return o(e),void s(e)}a!==r&&d(!0)}),[r,b,d,a]);var v=Object(n.useCallback)((function(){s(b())}),[b]),O=Object(I.useDebounce)(v,500);Object(n.useEffect)((function(){p&&u.current?(u.current(),u.current=null):E||p||u.current||(u.current=Object(l.subscribe)(O))}),[O,p,E])}(),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(a.PluginSidebarMoreMenuItem,{icon:Object(n.createElement)(R,null),target:_e},we),Object(n.createElement)(a.PluginSidebar,{className:"".concat(je,"-sidebar"),icon:Object(n.createElement)(S,{count:r,broken:t}),name:_e,title:we},Object(n.createElement)(de,null),Object(n.createElement)(me,null)))}}),Object(c.addFilter)("editor.BlockEdit","ampBlockValidation/filterEdit",D,-99)}]);